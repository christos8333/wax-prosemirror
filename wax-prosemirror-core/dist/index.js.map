{"version":3,"file":"index.js","sources":["../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../src/WaxContext.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../src/config/Config.js","../src/config/defaultConfig.js","../src/PmPlugins.js","../src/Application.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../src/WaxDOMSerializer.js","../src/WaxDOMParser.js","../src/helpers/TransformPasted.js","../src/WaxView.js","../src/plugins/defaultPlugins.js","../src/plugins/placeholder.js","../src/Wax.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import React, { useContext, useState } from 'react';\n\nexport const WaxContext = React.createContext({\n  view: {},\n  activeView: {},\n  activeViewId: null,\n  app: null,\n  updateView: null,\n  updateActiveView: null,\n});\n\nexport default props => {\n  const [context, setContext] = useState({\n    app: props.app,\n    view: props.view || {},\n    activeView: props.activeView || {},\n    activeViewId: props.activeViewId || {},\n    updateView: (newView, activeViewId) => {\n      const view = Object.assign(context.view, newView);\n      const activeView = view[activeViewId || context.activeViewId];\n      setContext({\n        ...context,\n        view,\n        activeView: activeView,\n        activeViewId: activeViewId || context.activeViewId,\n      });\n    },\n  });\n\n  return (\n    <WaxContext.Provider\n      value={{\n        ...context,\n      }}\n    >\n      {props.children}\n    </WaxContext.Provider>\n  );\n};\n\nexport const useInjection = identifier => {\n  const {\n    app: { container },\n  } = useContext(WaxContext);\n\n  if (!container) {\n    throw new Error();\n  }\n\n  return container.isBound(identifier)\n    ? { instance: container.get(identifier) }\n    : null;\n};\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { set, get, isArrayLikeObject } from 'lodash';\nimport { injectable, inject } from 'inversify';\n\n@injectable()\nexport default class Config {\n  _config = {};\n  constructor(@inject('config') config) {\n    this._config = config;\n  }\n\n  set(key, value) {\n    set(this._config, key, value);\n    return this._config;\n  }\n\n  get(key) {\n    return get(this._config, key);\n  }\n\n  pushToArray(key, value) {\n    let oldValue = this.get(key);\n    if (oldValue) {\n      if (isArrayLikeObject(value)) {\n        value.forEach(v => {\n          oldValue.push(v);\n        });\n      } else {\n        oldValue.push(value);\n      }\n    } else {\n      oldValue = value;\n    }\n    this.set(key, oldValue);\n    return this;\n  }\n}\n","import {\n  SchemaService,\n  MenuService,\n  RulesService,\n  ShortCutsService,\n  LayoutService,\n  OverlayService,\n} from 'wax-prosemirror-services';\n\nexport default {\n  services: [\n    new SchemaService(),\n    new RulesService(),\n    new ShortCutsService(),\n    new LayoutService(),\n    new MenuService(),\n    new OverlayService(),\n  ],\n};\n","import { injectable } from \"inversify\";\n@injectable()\nexport default class PmPlugins {\n  _plugins = new Map();\n  add(key, plugin) {\n    this._plugins.set(key, plugin);\n  }\n\n  getAll() {\n    return [...this._plugins.values()];\n  }\n\n  get(key) {\n    return this._plugins.get(key);\n  }\n}\n","import { Container } from 'inversify';\nimport 'reflect-metadata';\nimport deepmerge from 'deepmerge';\nimport Config from './config/Config';\nimport defaultConfig from './config/defaultConfig';\nimport PmPlugins from './PmPlugins';\n\nexport default class Application {\n  constructor(container) {\n    this.container = container;\n    this.PmPlugins = container.get('PmPlugins');\n  }\n\n  registerServices() {\n    let count = 0;\n    while (count < this.config.get('config.services').length) {\n      const allServices = this.config.get('config.services');\n      const service = this.config.get('config.services')[count];\n      /*\n        set App to every service\n        so services can have access to containers and config\n        */\n      service.setApp(this);\n\n      if (service.dependencies) {\n        const servicePos = count;\n        allServices.splice(servicePos + 1, 0, ...service.dependencies);\n      }\n\n      if (service.register) {\n        service.register();\n      }\n\n      count += 1;\n    }\n  }\n\n  setConfig() {\n    this.config = this.container.get('Config');\n  }\n\n  bootServices() {\n    const services = this.config.get('config.services');\n    services.forEach(plugin => {\n      if (plugin.boot) {\n        plugin.boot();\n      }\n    });\n  }\n\n  getPlugins() {\n    return this.PmPlugins.getAll();\n  }\n\n  getSchema() {\n    this.schema = this.container.get('Schema');\n    return this.schema.getSchema();\n  }\n\n  resetApp() {\n    this.container = {};\n    this.config = {};\n    this.PmPlugins = {};\n    this.schema = {};\n  }\n\n  static create(config) {\n    /* Merge Core Config with User Config */\n    const appConfig = deepmerge({ config: defaultConfig }, config, {\n      customMerge: key => {\n        if (key === 'services') {\n          return (coreService, configService) => {\n            return coreService.concat(configService);\n          };\n        }\n      },\n    });\n\n    /*\n    Create Container\n    */\n    const container = new Container();\n    /*\n\n    Set base bindings for the App to work\n    */\n    container.bind('PmPlugins').to(PmPlugins).inSingletonScope();\n\n    container.bind('Wax').toFactory(() => new Application(container));\n\n    container.bind('config').toConstantValue(appConfig);\n    container.bind('Config').to(Config).inSingletonScope();\n\n    /*\n    Start the App\n    */\n    const app = container.get('Wax');\n    app.setConfig();\n    appConfig.config.PmPlugins.forEach(configPlugin => {\n      app.PmPlugins.add(configPlugin.key, configPlugin);\n    });\n    app.registerServices();\n\n    return app;\n  }\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","import { DOMSerializer } from \"prosemirror-model\";\n\nclass WaxDOMSerializer extends DOMSerializer {}\n\nexport default WaxDOMSerializer;\n","import { DOMParser } from \"prosemirror-model\";\n\nclass WaxDOMParser extends DOMParser {}\n\nexport default WaxDOMParser;\n","import { forEach } from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\n\nconst transformPasted = (slice, view) => {\n  const { content } = slice;\n  const commentNodes = DocumentHelpers.findChildrenByMark(\n    content,\n    view.state.schema.marks.comment,\n    true,\n  );\n\n  const notes = DocumentHelpers.findChildrenByType(\n    content,\n    view.state.schema.nodes.footnote,\n    true,\n  );\n\n  const allComments = [];\n\n  commentNodes.map(node => {\n    node.node.marks.map(comment => {\n      if (comment.type.name === 'comment') {\n        allComments.push(comment);\n      }\n    });\n  });\n\n  const groupedCommentsById = allComments.reduce((obj, mark) => {\n    obj[mark.attrs.id] = [...(obj[mark.attrs.id] || []), mark];\n    return obj;\n  }, {});\n\n  forEach(Object.keys(groupedCommentsById), key => {\n    const id = uuidv4();\n    forEach(groupedCommentsById[key], comment => {\n      comment.attrs.id = id;\n    });\n  });\n\n  notes.forEach(note => {\n    note.node.attrs.id = uuidv4();\n  });\n\n  return slice;\n};\n\nexport default transformPasted;\n","import React, { useRef, useContext, useCallback } from 'react';\n\nimport applyDevTools from 'prosemirror-dev-tools';\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\n\nimport 'prosemirror-view/style/prosemirror.css';\n\nimport { trackedTransaction } from 'wax-prosemirror-services';\nimport { WaxContext } from './WaxContext';\nimport transformPasted from './helpers/TransformPasted';\n\nexport default props => {\n  const { readonly, onBlur, options, debug, autoFocus, user } = props;\n\n  const editorRef = useRef();\n  let view;\n  const context = useContext(WaxContext);\n\n  const setEditorRef = useCallback(node => {\n    if (editorRef.current) {\n      // this is where you do cleanup if you have to. the editorRef.current will\n      // still point to the old ref, the old node. so you have some time here to\n      // clean up the unmount if you need to.\n    }\n\n    if (node) {\n      view = new EditorView(\n        { mount: node },\n        {\n          editable: () => !readonly,\n          state: EditorState.create(options),\n          dispatchTransaction,\n          user,\n          handleDOMEvents: {\n            blur: onBlur\n              ? view => {\n                  onBlur(view.state.doc.content);\n                }\n              : null,\n          },\n          transformPasted: slice => {\n            return transformPasted(slice, view);\n          },\n        },\n      );\n\n      context.updateView(\n        {\n          main: view,\n        },\n        'main',\n      );\n      if (debug) applyDevTools(view);\n      if (autoFocus) view.focus();\n\n      return () => view.destroy();\n    }\n    editorRef.current = node;\n  }, []);\n\n  const dispatchTransaction = transaction => {\n    const { TrackChange } = props;\n\n    const tr = TrackChange.enabled\n      ? trackedTransaction(transaction, view.state, user)\n      : transaction;\n\n    const state = view.state.apply(tr);\n    view.updateState(state);\n\n    /* when a transaction comes from a view other than\n      main don't keep updating the view ,as this is\n      the central point of each transaction\n      */\n    if (!transaction.getMeta('outsideView')) {\n      context.updateView(\n        {\n          main: view,\n        },\n        'main',\n      );\n    }\n\n    props.onChange(state.doc.content);\n  };\n\n  const editor = <div ref={setEditorRef} />;\n  return props.children({\n    editor,\n  });\n};\n","import { history } from \"prosemirror-history\";\nimport { dropCursor } from \"prosemirror-dropcursor\";\nimport { gapCursor } from \"prosemirror-gapcursor\";\nimport \"prosemirror-gapcursor/style/gapcursor.css\";\n\nexport default [dropCursor(), gapCursor(), history()];\n","import { Plugin, PluginKey } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\n\nconst placeHolderText = new PluginKey(\"placeHolderText\");\n\nexport default props => {\n  return new Plugin({\n    key: placeHolderText,\n    props: {\n      decorations: state => {\n        const decorations = [];\n        const decorate = (node, pos) => {\n          if (\n            node.type.isBlock &&\n            node.childCount === 0 &&\n            state.doc.content.childCount === 1\n          ) {\n            decorations.push(\n              Decoration.node(pos, pos + node.nodeSize, {\n                class: \"empty-node\",\n                \"data-content\": props.content\n              })\n            );\n          }\n        };\n        state.doc.descendants(decorate);\n\n        return DecorationSet.create(state.doc, decorations);\n      }\n    }\n  });\n};\n","import React, { useEffect, useState } from 'react';\nimport debounce from 'lodash/debounce';\nimport styled from 'styled-components';\n\nimport WaxProvider from './WaxContext';\nimport Application from './Application';\n\nimport WaxDOMSerializer from './WaxDOMSerializer';\nimport WaxDOMParser from './WaxDOMParser';\n\nimport WaxView from './WaxView';\nimport defaultPlugins from './plugins/defaultPlugins';\nimport Placeholder from './plugins/placeholder';\n\nconst parser = schema => {\n  const WaxParser = WaxDOMParser.fromSchema(schema);\n\n  return content => {\n    const container = document.createElement('article');\n    container.innerHTML = content;\n    return WaxParser.parse(container);\n  };\n};\n\nconst serializer = schema => {\n  const WaxSerializer = WaxDOMSerializer.fromSchema(schema);\n  return content => {\n    const container = document.createElement('article');\n    container.appendChild(WaxSerializer.serializeFragment(content));\n    return container.innerHTML;\n  };\n};\n\nlet schema;\nconst createApplication = props => {\n  const application = Application.create(props);\n  schema = application.getSchema();\n  application.bootServices();\n  return application;\n};\n\nconst createPlaceholder = placeholder => {\n  return Placeholder({ content: placeholder });\n};\n\nconst LayoutWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 99%;\n`;\n\nconst Wax = props => {\n  let finalPlugins = [];\n  const [application, setApplication] = useState();\n\n  useEffect(() => {\n    const newApplication = createApplication(props);\n    setApplication(newApplication);\n    return () => newApplication.resetApp();\n  }, []);\n\n  const {\n    autoFocus,\n    className,\n    debug,\n    fileUpload,\n    layout,\n    onBlur,\n    placeholder,\n    readonly,\n    value,\n    user,\n    onChange,\n  } = props;\n\n  if (!application) return null;\n\n  const WaxOnchange = onChange ? onChange : value => true;\n\n  const editorContent = value ? value : '';\n\n  finalPlugins = defaultPlugins.concat([\n    createPlaceholder(placeholder),\n    ...application.getPlugins(),\n  ]);\n\n  const WaxOptions = {\n    schema,\n    plugins: finalPlugins,\n  };\n\n  const parse = parser(schema);\n  const serialize = serializer(schema);\n  WaxOptions.doc = parse(editorContent);\n\n  const finalOnChange = debounce(\n    value => {\n      WaxOnchange(serialize(value));\n    },\n    1000,\n    { maxWait: 5000 },\n  );\n  const TrackChange = application.config.get('config.EnableTrackChangeService');\n\n  const Layout = application.container.get('Layout');\n  if (layout) Layout.setLayout(layout);\n  const WaxRender = Layout.layoutComponent;\n\n  return (\n    <LayoutWrapper className={`${className}`}>\n      <WaxProvider app={application}>\n        <WaxView\n          autoFocus={autoFocus}\n          readonly={readonly}\n          options={WaxOptions}\n          placeholder={placeholder}\n          fileUpload={fileUpload}\n          onBlur={onBlur || (v => true)}\n          onChange={finalOnChange || (v => true)}\n          debug={debug}\n          TrackChange={TrackChange}\n          user={user}\n        >\n          {({ editor }) => <WaxRender editor={editor} />}\n        </WaxView>\n      </WaxProvider>\n    </LayoutWrapper>\n  );\n};\nexport default Wax;\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","Symbol","iterator","_arr","_n","_d","_e","undefined","_i","_s","next","done","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","WaxContext","React","createContext","view","activeView","activeViewId","app","updateView","updateActiveView","props","useState","newView","assign","context","setContext","children","useInjection","identifier","useContext","container","Error","isBound","instance","get","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","_taggedTemplateLiteral","strings","raw","freeze","_classCallCheck","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","Config","injectable","_config","config","inject","set","oldValue","isArrayLikeObject","v","services","SchemaService","RulesService","ShortCutsService","LayoutService","MenuService","OverlayService","PmPlugins","_plugins","Map","plugin","values","Application","count","allServices","service","setApp","dependencies","servicePos","splice","register","boot","getAll","schema","getSchema","appConfig","deepmerge","defaultConfig","customMerge","coreService","configService","concat","Container","bind","to","inSingletonScope","toFactory","toConstantValue","setConfig","configPlugin","add","registerServices","_setPrototypeOf","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","create","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","e","_typeof","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","Super","result","isNativeReflectConstruct","NewTarget","possibleConstructorReturn","WaxDOMSerializer","DOMSerializer","WaxDOMParser","DOMParser","transformPasted","content","commentNodes","DocumentHelpers","findChildrenByMark","state","marks","comment","notes","findChildrenByType","nodes","footnote","allComments","map","node","type","groupedCommentsById","reduce","mark","attrs","id","uuidv4","note","readonly","onBlur","options","debug","autoFocus","user","editorRef","useRef","setEditorRef","useCallback","current","EditorView","mount","editable","EditorState","dispatchTransaction","handleDOMEvents","blur","doc","main","applyDevTools","focus","destroy","transaction","TrackChange","tr","enabled","trackedTransaction","updateState","getMeta","onChange","editor","dropCursor","gapCursor","history","placeHolderText","PluginKey","Plugin","decorations","decorate","pos","isBlock","childCount","Decoration","nodeSize","descendants","DecorationSet","parser","WaxParser","fromSchema","document","createElement","innerHTML","parse","serializer","WaxSerializer","appendChild","serializeFragment","createApplication","application","bootServices","createPlaceholder","placeholder","Placeholder","LayoutWrapper","styled","div","Wax","finalPlugins","setApplication","useEffect","newApplication","resetApp","className","fileUpload","layout","WaxOnchange","editorContent","defaultPlugins","getPlugins","WaxOptions","plugins","serialize","finalOnChange","debounce","maxWait","Layout","setLayout","WaxRender","layoutComponent"],"mappings":"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"}