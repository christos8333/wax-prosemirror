{"version":3,"file":"index.js","sources":["../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../src/layouts/EditorElements.js","../src/layouts/EditoriaLayout.js"],"sourcesContent":["export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import { css } from 'styled-components';\n\n/* All styles regarding ProseMirror surface and elements */\n\nexport default css`\n  .ProseMirror {\n    counter-reset: footnote;\n    font-family: ${props => props.theme.fontReading};\n    &:focus {\n      outline: none;\n    }\n  }\n\n  .ProseMirror .wax-selection-marker {\n    background: #0a78ff;\n    color: white;\n  }\n\n  .ProseMirror footnote {\n    font-size: 0;\n    display: inline-block;\n    text-align: center;\n    width: 17px;\n    height: 17px;\n    background: black;\n    color: white;\n    cursor: pointer;\n  }\n\n  .ProseMirror footnote::after {\n    content: counter(footnote);\n    position: relative;\n    bottom: 2px;\n    font-size: 16px;\n    counter-increment: footnote;\n  }\n\n  hr {\n    padding: 2px 10px;\n    border: none;\n    margin: 1em 0;\n  }\n\n  hr:after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: silver;\n    line-height: 2px;\n  }\n\n  ul,\n  ol {\n    padding-left: 30px;\n  }\n\n  blockquote {\n    padding-left: 1em;\n    border-left: 3px solid #eee;\n    margin-left: 0;\n    margin-right: 0;\n  }\n\n  img {\n    cursor: default;\n  }\n\n  sup,\n  sub {\n    line-height: 0;\n  }\n\n  /* Tables */\n\n  table {\n    border-collapse: initial;\n    border-spacing: 0;\n    border-width: 0 thin thin 0;\n    border: 1px solid #eee;\n    table-layout: fixed;\n    width: 100%;\n    margin: 0;\n    overflow: hidden;\n    page-break-inside: avoid;\n  }\n\n  th,\n  td {\n    border: 1px solid #eee;\n    /*width: 200px;*/\n    padding: 2px 5px;\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .tableWrapper {\n    overflow-x: auto;\n  }\n\n  .column-resize-handle {\n    position: absolute;\n    right: -2px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    z-index: 20;\n    background-color: #adf;\n    pointer-events: none;\n  }\n\n  .ProseMirror.resize-cursor {\n    cursor: ew-resize;\n    cursor: col-resize;\n  }\n  /* Give selected cells a blue overlay */\n  .selectedCell:after {\n    z-index: 2;\n    position: absolute;\n    content: '';\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n\n  /* placeholder */\n  .empty-node::before {\n    color: #aaa;\n    float: left;\n    font-style: italic;\n    pointer-events: none;\n    height: 0;\n  }\n\n  p.empty-node:first-child::before {\n    content: attr(data-content);\n  }\n\n  /* invisible characters */\n  .invisible {\n    pointer-events: none;\n    user-select: none;\n  }\n\n  .invisible:before {\n    caret-color: inherit;\n    color: gray;\n    display: inline-block;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1em;\n    width: 0;\n  }\n\n  .invisible--space:before {\n    content: '·';\n  }\n\n  .invisible--break:before {\n    content: '¬';\n  }\n\n  .invisible--par:after {\n    content: '¶';\n  }\n\n  span.deletion {\n    text-decoration: line-through;\n    color: red;\n    footnote {\n      background: red;\n    }\n  }\n\n  span.insertion {\n    color: blue;\n  }\n\n  .selected-insertion,\n  .selected-deletion,\n  .selected-format-change,\n  .selected-block-change {\n    background-color: #fffacf;\n  }\n\n  .format-change {\n    border-bottom: 2px solid blue;\n  }\n\n  [data-track] {\n    position: relative;\n  }\n\n  [data-track]::before {\n    content: '';\n    position: absolute;\n    border-left: 2px solid blue;\n    left: -10px;\n    height: 100%;\n  }\n\n  li[data-track]::before,\n  li [data-track]::before {\n    left: -5px;\n  }\n\n  span.comment {\n    border-bottom: 2px solid #ffab20;\n    border-radius: 3px 3px 0 0;\n\n    .active-comment {\n      background-color: #ffab20;\n    }\n  }\n`;\n","import React, { useContext } from 'react';\nimport styled, { ThemeProvider } from 'styled-components';\nimport PanelGroup from 'react-panelgroup';\nimport { InfoArea } from 'wax-prosemirror-components';\nimport { componentPlugin } from 'wax-prosemirror-services';\nimport { cokoTheme } from 'wax-prosemirror-themes';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\nimport { WaxContext } from 'wax-prosemirror-core';\nimport EditorElements from './EditorElements';\n\nconst LayoutWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  .divider {\n    &:before {\n      content: 'Notes';\n      position: relative;\n      bottom: 14px;\n      background: white;\n      color: #a3a3a3;\n      font-weight: 600;\n      letter-spacing: 0.15em;\n    }\n    &:after {\n      color: #a3a3a3;\n      content: '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . '\n        '. . . . . . . . . . . . . . . . . . . . ';\n      float: left;\n      font-weight: 400;\n      white-space: nowrap;\n      width: 0;\n      position: relative;\n      bottom: 14px;\n    }\n  }\n`;\n\nconst LeftMenuSurfaceContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  width: 100%;\n`;\n\nconst WaxSurfaceContainer = styled.div`\n  flex: 1;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n`;\n\nconst EditorContainer = styled.div`\n  width: 65%;\n  height: 100%;\n  .ProseMirror {\n    -moz-box-shadow: 0 0 8px #ecedf1;\n    -webkit-box-shadow: 0 0 8px #ecedf1;\n    box-shadow: 0 0 8px #ecedf1;\n    min-height: 90%;\n    padding: 40px;\n  }\n`;\n\nconst WaxSurfaceScroll = styled.div`\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n  position: absolute;\n  display: flex;\n  right: 0;\n  top: 0;\n  box-sizing: border-box;\n  padding: 0 2px 2px 2px;\n  height: 100%;\n  ${EditorElements};\n`;\n\nconst MainMenuContainer = styled.div`\n  background: #fff;\n  height: 52px;\n  line-height: 32px;\n  position: relative;\n  user-select: none;\n  border-bottom: 2px solid #ecedf1;\n`;\nconst MainMenuInner = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  background: transparent;\n  z-index: 9999;\n  div {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`;\n\nconst SideMenuContainer = styled.div`\n  display: flex;\n  width: 14%;\n  height: 98%;\n`;\n\nconst SideMenuInner = styled.div`\n  display: flex;\n  width: 100%;\n  > div {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    margin-top: 15px;\n    button {\n      display: flex;\n      flex-direction: column;\n      font-family: ${props => props.theme.fontInterface};\n      margin-left: 5%;\n      width: 90%;\n    }\n    [data-name='Display'] {\n      border-right: none;\n    }\n  }\n`;\n\nconst NotesAreaContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  position: absolute;\n`;\n\nconst NotesContainer = styled.div`\n  counter-reset: footnote-view;\n  display: flex;\n  flex-direction: column;\n  padding: 0 0 10px 5px;\n  height: 100%;\n  width: 65%;\n  position: relative;\n`;\n\nconst CommentsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 35%;\n  height: 100%;\n`;\n\nlet surfaceHeight = 700;\nlet notesHeight = 50;\n\nconst onResizeEnd = arr => {\n  surfaceHeight = arr[0].size;\n  notesHeight = arr[1].size;\n};\n\nconst hasNotes = main => {\n  const notes = DocumentHelpers.findChildrenByType(\n    main.state.doc,\n    main.state.schema.nodes.footnote,\n    true,\n  );\n  return notes;\n};\n\nconst LeftSideBar = componentPlugin('leftSideBar');\nconst RightSideBar = componentPlugin('rightSideBar');\nconst TopBar = componentPlugin('topBar');\nconst NotesArea = componentPlugin('notesArea');\nconst RightArea = componentPlugin('rightArea');\nconst WaxOverlays = componentPlugin('waxOverlays');\n\nconst withNotes = () => {\n  return (\n    <NotesAreaContainer>\n      <NotesContainer id=\"notes-container\">\n        <NotesArea />\n      </NotesContainer>\n      <CommentsContainer>\n        <RightArea area=\"notes\" />\n      </CommentsContainer>\n    </NotesAreaContainer>\n  );\n};\n\nconst EditoriaLayout = ({ editor }) => {\n  const {\n    view: { main },\n  } = useContext(WaxContext);\n  let AreasWithNotes = null;\n\n  if (main) {\n    const notes = hasNotes(main);\n    if (notes.length) AreasWithNotes = withNotes();\n  }\n\n  return (\n    <ThemeProvider theme={cokoTheme}>\n      <LayoutWrapper>\n        <MainMenuContainer>\n          <MainMenuInner>\n            <TopBar />\n          </MainMenuInner>\n        </MainMenuContainer>\n\n        <LeftMenuSurfaceContainer>\n          <SideMenuContainer>\n            <SideMenuInner>\n              <LeftSideBar />\n            </SideMenuInner>\n          </SideMenuContainer>\n\n          <PanelGroup\n            direction=\"column\"\n            panelWidths={[\n              { size: surfaceHeight, resize: 'dynamic' },\n              { size: notesHeight, resize: 'stretch' },\n            ]}\n            onResizeEnd={onResizeEnd}\n          >\n            <WaxSurfaceContainer>\n              <WaxSurfaceScroll className=\"wax-surface-scroll\">\n                <EditorContainer>{editor}</EditorContainer>\n                <CommentsContainer>\n                  <RightArea area=\"main\" />\n                </CommentsContainer>\n              </WaxSurfaceScroll>\n              <RightSideBar />\n            </WaxSurfaceContainer>\n            {AreasWithNotes}\n          </PanelGroup>\n        </LeftMenuSurfaceContainer>\n        <InfoArea />\n        <WaxOverlays />\n      </LayoutWrapper>\n    </ThemeProvider>\n  );\n};\n\nexport default EditoriaLayout;\n"],"names":["_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","css","props","theme","fontReading","LayoutWrapper","styled","div","LeftMenuSurfaceContainer","WaxSurfaceContainer","EditorContainer","WaxSurfaceScroll","EditorElements","MainMenuContainer","MainMenuInner","SideMenuContainer","SideMenuInner","fontInterface","NotesAreaContainer","NotesContainer","CommentsContainer","surfaceHeight","notesHeight","onResizeEnd","arr","size","hasNotes","main","notes","DocumentHelpers","findChildrenByType","state","doc","schema","nodes","footnote","LeftSideBar","componentPlugin","RightSideBar","TopBar","NotesArea","RightArea","WaxOverlays","withNotes","React","EditoriaLayout","editor","useContext","WaxContext","view","AreasWithNotes","length","ThemeProvider","cokoTheme","resize","InfoArea"],"mappings":"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"}