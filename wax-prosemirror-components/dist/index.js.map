{"version":3,"file":"index.js","sources":["../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../src/components/infoArea/InfoArea.js","../src/components/Overlay.js","../src/components/Button.js","../src/icons/icons.js","../src/components/TableDropDown.js","../src/components/ImageUpload.js","../src/components/LeftMenuTitle.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../src/components/ToolGroupComponent.js","../src/components/notes/NoteNumber.js","../src/components/notes/NoteEditorContainer.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../src/components/link/LinkComponent.js","../src/components/comments/CommentBubbleComponent.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../src/components/comments/Comment.js","../src/components/comments/CommentBox.js","../src/components/trackChanges/TrackChangeBox.js","../src/components/rightArea/BoxList.js","../src/components/rightArea/RightArea.js","../src/components/trackChanges/TrackChangeEnable.js"],"sourcesContent":["export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst InfoAreaContainer = styled.div`\n  ${\"\" /* height: ${props => (props.height ? props.height : \"30px\")};\n  position: fixed;\n  bottom: 0;\n  z-index: 9999;\n  background: #efefef;\n  width: 100%;*/};\n`;\n\nconst InfoArea = () => <InfoAreaContainer />;\n\nexport default InfoArea;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst OverlayContainer = styled.div`\n  position: ${props => props.position.position};\n  left: ${props => `${props.position.left}px`};\n  top: ${props => `${props.position.top}px`};\n  z-index: 999;\n`;\n\nconst Overlay = props => (\n  <OverlayContainer {...props}>{props.children}</OverlayContainer>\n);\n\nexport default Overlay;\n","/* eslint react/prop-types: 0 */\nimport React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { ButtonStyles } from 'wax-prosemirror-themes';\nimport { WaxContext } from 'wax-prosemirror-core';\n\nconst ButtonStyled = styled.button`\n  ${ButtonStyles};\n  opacity: ${props => (props.select ? 1 : 0.4)};\n  pointer-events: ${props => (props.select ? 'default' : 'none')};\n  color: ${props => (props.isActive ? 'white' : props.theme.colorButton)};\n  background-color: ${props =>\n    props.isActive ? props.theme.colorPrimary : 'transparent'};\n  &:hover {\n    background-color: ${props =>\n      props.isActive ? props.theme.colorPrimary : 'transparent'};\n  }\n`;\n\nconst Button = ({ view = {}, item }) => {\n  const {\n    view: { main },\n    activeViewId,\n  } = useContext(WaxContext);\n  if (item.onlyOnMain) {\n    view = main;\n  }\n\n  return (\n    <ButtonStyled\n      type=\"button\"\n      isActive={item.active && item.active(view.state)}\n      title={item.title}\n      disabled={item.enable && !item.enable(view.state)}\n      onMouseDown={e => {\n        e.preventDefault();\n        item.run(view.state, view.dispatch);\n      }}\n      select={item.select && item.select(view.state, activeViewId)}\n    >\n      {item.content}\n    </ButtonStyled>\n  );\n};\n\nexport default Button;\n","import React from 'react';\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\nimport {\n  faBold,\n  faItalic,\n  faCode,\n  faSuperscript,\n  faSubscript,\n  faUnderline,\n  faStrikethrough,\n  faLink,\n  faParagraph,\n  faHeading,\n  faQuoteLeft,\n  faListOl,\n  faListUl,\n  faImage,\n  faTable,\n  faUndo,\n  faRedo,\n  faOutdent,\n  faAngleUp,\n  faStickyNote,\n  faVial,\n  faFileCode,\n  faEllipsisH,\n} from '@fortawesome/free-solid-svg-icons';\n\nexport default {\n  em: <FontAwesomeIcon icon={faItalic} />,\n  italic: <FontAwesomeIcon icon={faItalic} />,\n  strong: <FontAwesomeIcon icon={faBold} />,\n  bold: <FontAwesomeIcon icon={faBold} />,\n  code: <FontAwesomeIcon icon={faCode} />,\n  subscript: <FontAwesomeIcon icon={faSubscript} />,\n  superscript: <FontAwesomeIcon icon={faSuperscript} />,\n  underline: <FontAwesomeIcon icon={faUnderline} />,\n  strikethrough: <FontAwesomeIcon icon={faStrikethrough} />,\n  link: <FontAwesomeIcon icon={faLink} />,\n  paragraph: <FontAwesomeIcon icon={faParagraph} />,\n  heading: <FontAwesomeIcon icon={faHeading} />,\n  blockquote: <FontAwesomeIcon icon={faQuoteLeft} />,\n  code_block: <FontAwesomeIcon icon={faFileCode} />,\n  ordered_list: <FontAwesomeIcon icon={faListOl} />,\n  bullet_list: <FontAwesomeIcon icon={faListUl} />,\n  image: <FontAwesomeIcon icon={faImage} />,\n  table: <FontAwesomeIcon icon={faTable} />,\n  footnote: <FontAwesomeIcon icon={faStickyNote} />,\n  undo: <FontAwesomeIcon icon={faUndo} />,\n  redo: <FontAwesomeIcon icon={faRedo} />,\n  lift: <FontAwesomeIcon icon={faOutdent} />,\n  join_up: <FontAwesomeIcon icon={faAngleUp} />,\n  source: <FontAwesomeIcon icon={faVial} />,\n  ellipses: <FontAwesomeIcon icon={faEllipsisH} />,\n  small_caps: (\n    <span className=\"small-caps\">\n      <svg\n        width=\"35\"\n        height=\"20\"\n        viewBox=\"0 0 35 20\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M9.21799 1.12207L9.34998 0H0V1.12207H4.004V15.0701H5.258V1.12207H9.21799ZM14.14 6.34912L14.242 5.51611H7.935V6.34912H10.587V15.0701H11.539V6.34912H14.14Z\"\n          transform=\"translate(10.286 8.92993)\"\n          fill=\"#4F4F4F\"\n        />\n      </svg>\n    </span>\n  ),\n};\n","/* eslint react/prop-types: 0 */\nimport React from 'react';\nimport styled from 'styled-components';\nimport * as tablesFn from 'prosemirror-tables';\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\n\nconst DropdownStyled = styled(Dropdown)`\n  display: inline-flex;\n  cursor: not-allowed;\n  opacity: ${props => (props.select ? 1 : 0.4)};\n  pointer-events: ${props => (props.select ? 'default' : 'none')};\n  .Dropdown-control {\n    border: none;\n  }\n  .Dropdown-arrow {\n    right: 25px;\n    top: 21px;\n  }\n  .Dropdown-menu {\n    width: 120%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    .Dropdown-option {\n      width: 100%;\n    }\n  }\n`;\n\nconst dropDownOptions = [\n  { label: 'add column before', value: 'addColumnBefore' },\n  { label: 'add column after', value: 'addColumnAfter' },\n  { label: 'Delete column', value: 'deleteColumn' },\n  { label: 'Insert row before', value: 'addRowBefore' },\n  { label: 'Insert row after', value: 'addRowAfter' },\n  { label: 'Delete row', value: 'deleteRow' },\n  { label: 'Delete table', value: 'deleteTable' },\n  { label: 'Merge cells', value: 'mergeCells' },\n  { label: 'Split cell', value: 'splitCell' },\n  { label: 'Toggle header column', value: 'toggleHeaderColumn' },\n  { label: 'Toggle header row', value: 'toggleHeaderRow' },\n  { label: 'Toggle header cells', value: 'toggleHeaderCell' },\n];\n\nconst TableDropDown = ({ view: { dispatch, state }, item }) => (\n  <DropdownStyled\n    options={dropDownOptions}\n    onChange={option => {\n      tablesFn[option.value](state, dispatch);\n    }}\n    placeholder=\"Table Options\"\n    select={item.select && item.select(state)}\n  />\n);\nexport default TableDropDown;\n","/* eslint react/prop-types: 0 */\nimport React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { WaxContext } from 'wax-prosemirror-core';\n\nconst UploadImage = styled.div`\n  opacity: ${props => (props.select ? 1 : 0.4)};\n  pointer-events: ${props => (props.select ? 'default' : 'none')};\n  color: #777;\n  display: inline-flex;\n  padding: 0px 10px;\n  .custom-file-upload {\n    cursor: pointer;\n  }\n  &:hover {\n  }\n  input {\n    display: none;\n  }\n`;\nconst ImageUpload = ({ item, fileUpload, view }) => {\n  const { activeViewId } = useContext(WaxContext);\n\n  return (\n    <UploadImage select={item.select && item.select(view.state, activeViewId)}>\n      <label\n        className=\"custom-file-upload\"\n        title=\"upload image\"\n        htmlFor=\"file-upload\"\n      >\n        {item.content}\n        <input\n          id=\"file-upload\"\n          onChange={e => fileUpload(e.target.files[0])}\n          type=\"file\"\n        />\n      </label>\n    </UploadImage>\n  );\n};\nexport default ImageUpload;\n","/* eslint react/prop-types: 0 */\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst LeftMenuStyled = styled.div`\n  border-bottom: 1px solid #d9d9d9;\n  color: #979797;\n  font-family: 'Fira Sans';\n  font-size: 15px;\n  font-weight: bold;\n  letter-spacing: 0.6px;\n  list-style: none;\n  line-height: 0;\n  margin: 5px 0;\n  display: block;\n  padding: 20px 0 10px;\n  margin-left: 10px;\n  text-align: left;\n  text-transform: uppercase;\n  width: 51%;\n`;\n\nconst LeftMenuTitle = ({ title }) => {\n  return <LeftMenuStyled>{title}</LeftMenuStyled>;\n};\n\nexport default LeftMenuTitle;\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import React, { useState } from 'react';\nimport { isFunction } from 'lodash';\nimport styled from 'styled-components';\nimport icons from '../icons/icons';\n\nconst ToolGroupStyled = styled.div`\n  border-right: 1px solid #ecedf1;\n  &:last-child {\n    border-right: none;\n  }\n`;\n\nconst MoreButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  &:active {\n    outline: none;\n  }\n`;\n\nconst InnerStyled = styled.div`\n  display: flex;\n  width: 0;\n  top: 40px;\n  position: relative;\n  right: 100%;\n`;\n\nconst ToolGroupComponent = ({ view, tools, name, title }) => {\n  const [more, showHide] = useState(false),\n    toolsShown = [],\n    rest = [],\n    DisplayTitle = isFunction(title) ? title : () => title;\n\n  tools.forEach(tool => {\n    tool.isIntoMoreSection() && tool.isDisplayed()\n      ? rest.push(tool.renderTool(view))\n      : toolsShown.push(tool.renderTool(view));\n  });\n\n  return (\n    <ToolGroupStyled data-name={name}>\n      <DisplayTitle />\n      {toolsShown}\n      {rest.length && !more ? (\n        <MoreButton title=\"show more tools\" onClick={() => showHide(!more)}>\n          {icons.ellipses}\n        </MoreButton>\n      ) : null}\n      {more && (\n        <div>\n          <MoreButton title=\"hide\" onClick={() => showHide(!more)}>\n            {icons.ellipses}\n          </MoreButton>\n          <InnerStyled>{rest}</InnerStyled>\n        </div>\n      )}\n    </ToolGroupStyled>\n  );\n};\n\nexport default ToolGroupComponent;\n","/* eslint react/prop-types: 0 */\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst NoteNumberStyled = styled.div`\n  display: flex;\n  margin-top: 10px;\n  width: 2%;\n  &:after {\n    content: counter(footnote-view);\n    vertical-align: super;\n    font-size: 75%;\n    counter-increment: footnote-view;\n    cursor: pointer;\n  }\n`;\n\nconst onClick = () => {};\n\nconst NoteNumber = ({ number }) => {\n  return <NoteNumberStyled onClick={onClick} />;\n};\n\nexport default NoteNumber;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport NoteNumber from './NoteNumber';\n\nconst NoteEditorContainerStyled = styled.div`\n  display: flex;\n  flex-direction: row;\n  min-height: 28px;\n  width: 100%;\n  position: relative;\n  margin-bottom: 5px;\n`;\n\nconst NoteStyled = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  min-height: 20px;\n  margin-top: 10px;\n  height: 100%;\n  border-bottom: 1px solid black;\n  &:focus {\n    outline: none;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  span.comment {\n    border-bottom: 2px solid #ffab20;\n    border-radius: 3px 3px 0 0;\n\n    .active-comment {\n      background-color: #ffab20;\n    }\n  }\n\n  span.deletion {\n    text-decoration: line-through;\n    color: red;\n  }\n\n  span.insertion {\n    color: blue;\n  }\n\n  .selected-insertion,\n  .selected-deletion,\n  .selected-format-change,\n  .selected-block-change {\n    background-color: #fffacf;\n  }\n\n  .format-change {\n    border-bottom: 2px solid blue;\n  }\n`;\n\nconst NoteEditorContainer = React.forwardRef((props, ref) => (\n  <NoteEditorContainerStyled>\n    <NoteNumber /> <NoteStyled ref={ref} {...props} />\n  </NoteEditorContainerStyled>\n));\n\nexport default NoteEditorContainer;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","/* eslint react/prop-types: 0 */\nimport React, { useRef, useEffect, useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { WaxContext } from 'wax-prosemirror-core';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\n\nconst LinkWrapper = styled.div`\n  padding: 20px;\n  border-radius: 3px;\n  border: 1px solid #000;\n  background: #ecedf1;\n  z-index: 9999;\n  -webkit-box-shadow: 0px 0px 0px 2px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: 0px 0px 0px 2px rgba(0, 0, 0, 0.75);\n  box-shadow: 0px 0px 0px 2px rgba(0, 0, 0, 0.75);\n`;\n\nconst Button = styled.button`\n  cursor: pointer;\n`;\n\nconst LinkComponent = ({ mark, setPosition, position }) => {\n  const href = mark ? mark.attrs.href : null;\n  const linkMark = mark ? mark : null;\n  const { activeView } = useContext(WaxContext);\n  const { state, dispatch } = activeView;\n  const ref = useRef(null);\n  const linkInput = useRef(null);\n  const [addButtonText, setButtonText] = useState('Create');\n  const [lastLinkMark, setLLastLinkMark] = useState(linkMark);\n  const [linkHref, setLinkHref] = useState(href);\n\n  useEffect(() => {\n    setLinkText();\n    removeMarkIfEmptyHref();\n  }, [ref.current, href]);\n\n  const addLinkHref = () => {\n    const href = linkHref;\n    const linkMark = state.schema.marks.link;\n    const { tr } = state;\n\n    dispatch(\n      tr.addMark(\n        mark.from,\n        mark.to,\n        linkMark.create({\n          ...((mark && mark.attrs) || {}),\n          href,\n        }),\n      ),\n    );\n    activeView.focus();\n  };\n\n  const removeLink = () => {\n    dispatch(state.tr.removeMark(mark.from, mark.to, state.schema.marks.link));\n    activeView.focus();\n  };\n\n  const handleKeyDown = event => {\n    if (event.key === 'Enter' || event.which === 13) {\n      addLinkHref();\n    }\n  };\n\n  const updateLinkHref = () => {\n    const {\n      current: { value },\n    } = linkInput;\n    setLinkHref(value);\n  };\n\n  const setLinkText = () => {\n    if (mark && mark.attrs.href !== '') {\n      setButtonText('Update');\n      setLinkHref(mark.attrs.href);\n    } else {\n      setButtonText('Create');\n      setLinkHref('');\n      if (linkInput.current) linkInput.current.focus();\n    }\n  };\n\n  const removeMarkIfEmptyHref = () => {\n    const {\n      selection: { $from, $to },\n    } = state;\n    const PMLinkMark = state.schema.marks.link;\n    const actualMark = DocumentHelpers.getSelectionMark(state, PMLinkMark);\n    setLLastLinkMark(actualMark);\n\n    if (\n      lastLinkMark.attrs.href === '' &&\n      ($from.pos < lastLinkMark.from || $to.pos > lastLinkMark.to)\n    ) {\n      dispatch(\n        state.tr\n          .setMeta('addToHistory', false)\n          .removeMark(\n            lastLinkMark.from,\n            lastLinkMark.to,\n            state.schema.marks.link,\n          ),\n      );\n    }\n  };\n\n  return mark ? (\n    <LinkWrapper ref={ref}>\n      <input\n        type=\"text\"\n        ref={linkInput}\n        onChange={updateLinkHref}\n        onKeyPress={handleKeyDown}\n        value={linkHref}\n      />\n      <Button primary onClick={addLinkHref}>\n        {addButtonText}\n      </Button>\n      <Button onClick={removeLink}>Remove</Button>\n    </LinkWrapper>\n  ) : null;\n};\n\nexport default LinkComponent;\n","/* eslint react/prop-types: 0 */\nimport React, { useLayoutEffect, useContext } from 'react';\nimport { Commands, DocumentHelpers } from 'wax-prosemirror-utilities';\nimport { WaxContext } from 'wax-prosemirror-core';\n\nconst CommentBubbleComponent = ({\n  setPosition,\n  position,\n  showComment,\n  group,\n}) => {\n  const { activeView, activeViewId } = useContext(WaxContext);\n  const { state, dispatch } = activeView;\n  useLayoutEffect(() => {\n    const WaxSurface = activeView.dom.getBoundingClientRect();\n    const { selection } = activeView.state;\n    const { from, to } = selection;\n    const start = activeView.coordsAtPos(from);\n    const end = activeView.coordsAtPos(to);\n    const difference = end.top - start.top;\n    const left = WaxSurface.width + WaxSurface.x;\n    const top = end.top - difference / 2 - 5;\n    setPosition({ ...position, left, top });\n  }, [position.left]);\n\n  const createComment = event => {\n    event.preventDefault();\n    Commands.createComment(state, dispatch, group, activeViewId);\n    activeView.focus();\n  };\n\n  const isSelectionComment = () => {\n    const commentMark = activeView.state.schema.marks.comment;\n    const mark = DocumentHelpers.findMark(state, commentMark, true);\n\n    // TODO Overlapping comments . for now don't allow\n    if (mark.length >= 1) return true;\n    return false;\n  };\n\n  return (\n    !isSelectionComment() &&\n    showComment(activeViewId) && (\n      <button\n        type=\"button\"\n        onMouseDown={event => {\n          createComment(event);\n        }}\n      >\n        create\n      </button>\n    )\n  );\n};\n\nexport default CommentBubbleComponent;\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* eslint react/prop-types: 0 */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { last } from 'lodash';\nimport styled from 'styled-components';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\n\nconst SinlgeCommentRow = styled.div`\n  padding: 4px;\n  border-bottom: 1px solid #ffab20;\n  cursor: pointer;\n`;\n\nexport default ({ comment, activeView, user, active }) => {\n  const commentInput = useRef(null);\n  const [commentAnnotation, setCommentAnnotation] = useState(comment);\n  const [commentInputValue, setcommentInputValue] = useState('');\n  const { state, dispatch } = activeView;\n  const allCommentsWithSameId = DocumentHelpers.findAllMarksWithSameId(\n    state,\n    comment,\n  );\n  const {\n    attrs: { conversation },\n  } = comment;\n  const commentMark = state.schema.marks.comment;\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (commentInput.current !== null && conversation.length === 0)\n        commentInput.current.focus();\n    }, 500);\n  }, [active]);\n\n  const handleKeyDown = event => {\n    if (event.key === 'Enter' || event.which === 13) {\n      saveComment(event);\n    }\n  };\n\n  const saveComment = event => {\n    event.stopPropagation();\n\n    const {\n      current: { value },\n    } = commentInput;\n    const { tr, doc } = state;\n\n    const obj = {\n      content: value,\n      displayName: user.username,\n      timestamp: Math.floor(Date.now() / 300000),\n    };\n\n    commentAnnotation.attrs.conversation.push(obj);\n\n    allCommentsWithSameId.forEach(singleComment => {\n      dispatch(\n        tr.addMark(\n          singleComment.pos,\n          singleComment.pos + singleComment.nodeSize,\n          commentMark.create({\n            ...((commentAnnotation && commentAnnotation.attrs) || {}),\n            conversation: commentAnnotation.attrs.conversation,\n          }),\n        ),\n      );\n    });\n\n    setcommentInputValue('');\n  };\n\n  const updateCommentInputValue = () => {\n    const {\n      current: { value },\n    } = commentInput;\n    setcommentInputValue(value);\n  };\n\n  const onBlur = () => {\n    const {\n      current: { value },\n    } = commentInput;\n    if (value !== '') {\n      // saveComment();\n    }\n\n    if (conversation.length === 0 && value === '') {\n      resolveComment();\n    }\n  };\n\n  const resolveComment = event => {\n    if (event) event.stopPropagation();\n    let maxPos = comment.pos;\n    let minPos = comment.pos;\n\n    allCommentsWithSameId.forEach(singleComment => {\n      const markPosition = DocumentHelpers.findMarkPosition(\n        activeView,\n        singleComment.pos,\n        'comment',\n      );\n      if (markPosition.from < minPos) minPos = markPosition.from;\n      if (markPosition.to > maxPos) maxPos = markPosition.to;\n    });\n\n    if (allCommentsWithSameId.length > 1)\n      maxPos += last(allCommentsWithSameId).node.nodeSize;\n    dispatch(state.tr.removeMark(minPos, maxPos, commentMark));\n    activeView.focus();\n  };\n\n  const commentInputReply = () => {\n    return (\n      <>\n        <input\n          type=\"text\"\n          ref={commentInput}\n          placeholder=\"add a new comment\"\n          onChange={updateCommentInputValue}\n          onKeyPress={handleKeyDown}\n          onBlur={onBlur}\n          onClick={event => {\n            event.stopPropagation();\n          }}\n          value={commentInputValue}\n          disabled={!active}\n        />\n        <button\n          disabled={!active}\n          type=\"button\"\n          onClick={event => saveComment(event)}\n        >\n          Post\n        </button>\n        <button\n          disabled={!active}\n          type=\"button\"\n          onClick={event => resolveComment(event)}\n        >\n          Resolve\n        </button>\n      </>\n    );\n  };\n\n  return conversation.length === 0 ? (\n    <>{commentInputReply()}</>\n  ) : (\n    <>\n      {conversation.map((singleComment, index) => {\n        return (\n          <SinlgeCommentRow key={uuidv4()}>\n            {`${singleComment.displayName} : ${singleComment.content}`}\n          </SinlgeCommentRow>\n        );\n      })}\n      {commentInputReply()}\n    </>\n  );\n};\n","/* eslint react/prop-types: 0 */\nimport React, { useState, useEffect, useContext, memo } from 'react';\nimport { TextSelection } from 'prosemirror-state';\nimport { last, maxBy } from 'lodash';\n\nimport { Transition } from 'react-transition-group';\nimport styled from 'styled-components';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\nimport { WaxContext } from 'wax-prosemirror-core';\nimport Comment from './Comment';\n\nconst CommentBoxStyled = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 10px;\n  border: 1px solid #ffab20;\n  position: absolute;\n  transition: ${({ state }) => 'top 1s, opacity 1.5s, left 1s'};\n  top: ${props => (props.top ? `${props.top}px` : 0)};\n  left: ${props => (props.active ? `${63}%` : `${65}%`)};\n  opacity: ${({ state }) => {\n    switch (state) {\n      case 'exited':\n        return 0.2;\n      case 'exiting':\n        return 0.4;\n      case 'entering':\n        return 0.6;\n      case 'entered':\n        return 1;\n      default:\n    }\n  }};\n`;\n\nexport default ({ comment, top, dataBox }) => {\n  console.log('rerender');\n  const [animate, setAnimate] = useState(false);\n  const {\n    attrs: { id },\n  } = comment;\n\n  useEffect(() => {\n    setAnimate(true);\n  }, []);\n\n  const MemorizedComponent = memo(() => {\n    const {\n      view,\n      view: {\n        main: {\n          props: { user },\n        },\n      },\n      app,\n      activeView,\n    } = useContext(WaxContext);\n    let active = false;\n\n    const commentPlugin = app.PmPlugins.get('commentPlugin');\n    const activeComment = commentPlugin.getState(activeView.state).comment;\n\n    if (activeComment && id === activeComment.attrs.id) active = true;\n\n    const setCommentActive = () => {\n      const viewId = comment.attrs.viewid;\n\n      if (active) {\n        view[viewId].focus();\n        return false;\n      }\n\n      const allCommentsWithSameId = DocumentHelpers.findAllMarksWithSameId(\n        view[viewId].state,\n        comment,\n      );\n\n      const maxPos = maxBy(allCommentsWithSameId, 'pos');\n      maxPos.pos += last(allCommentsWithSameId).node.nodeSize;\n\n      view[viewId].dispatch(\n        view[viewId].state.tr.setSelection(\n          new TextSelection(\n            view[viewId].state.tr.doc.resolve(maxPos.pos, maxPos.pos),\n          ),\n        ),\n      );\n\n      view[viewId].focus();\n    };\n\n    return (\n      <>\n        <Transition in={animate} timeout={1000}>\n          {state => (\n            <CommentBoxStyled\n              top={top}\n              state={state}\n              data-box={dataBox}\n              active={active}\n              onClick={setCommentActive}\n            >\n              <Comment\n                comment={comment}\n                active={active}\n                activeView={activeView}\n                user={user}\n              />\n            </CommentBoxStyled>\n          )}\n        </Transition>\n      </>\n    );\n  });\n\n  return <MemorizedComponent />;\n};\n","import { Mark } from \"prosemirror-model\";\nimport React, { Fragment, useState, useEffect, useContext } from \"react\";\nimport { Transition } from \"react-transition-group\";\nimport styled from \"styled-components\";\nimport { WaxContext } from \"wax-prosemirror-core\";\n\nconst TrackChangeBoxStyled = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 10px;\n  border: 1px solid blue;\n  position: absolute;\n  transition: ${({ state }) => \"top 1s, opacity 1.5s, left 1s\"};\n  top: ${props => (props.top ? `${props.top}px` : 0)};\n  left: ${props => (props.active ? `${63}%` : `${65}%`)};\n  opacity: ${({ state }) => {\n    switch (state) {\n      case \"exited\":\n        return 0.2;\n      case \"exiting\":\n        return 0.4;\n      case \"entering\":\n        return 0.6;\n      case \"entered\":\n        return 1;\n    }\n  }};\n`;\n\nexport default ({ trackChange, view, top, dataBox }) => {\n  const [animate, setAnimate] = useState(false);\n  const { view: { main }, app, activeView } = useContext(WaxContext);\n  let action;\n  if (trackChange instanceof Mark) {\n    if ((trackChange.type.name = \"format_change\")) {\n      const { attrs: { username, before, after } } = trackChange;\n      action = `User ${username} added ${after[0]}`;\n    }\n  } else {\n    action = `User demo changed paragraph to heading 1`;\n  }\n\n  let active = false;\n  useEffect(() => {\n    setAnimate(true);\n  }, []);\n\n  return (\n    <Fragment>\n      <Transition in={animate} timeout={1000}>\n        {state => (\n          <TrackChangeBoxStyled\n            top={top}\n            state={state}\n            data-box={dataBox}\n            active={active}\n          >\n            <div>\n              {action}\n              <button>Accept</button>\n              <button>Reject</button>\n            </div>\n          </TrackChangeBoxStyled>\n        )}\n      </Transition>\n    </Fragment>\n  );\n};\n","/* eslint react/prop-types: 0 */\nimport { Mark } from 'prosemirror-model';\nimport React from 'react';\nimport CommentBox from '../comments/CommentBox';\nimport TrackChangeBox from '../trackChanges/TrackChangeBox';\n\nexport default ({ commentsTracks, view, position }) => {\n  if (!position) return null;\n  return (\n    <>\n      {commentsTracks.map((commentTrack, index) => {\n        const id =\n          commentTrack instanceof Mark\n            ? commentTrack.attrs.id\n            : commentTrack.node.attrs.id;\n\n        const top = position[index] ? position[index][id] : 0;\n\n        if (commentTrack.type && commentTrack.type.name === 'comment') {\n          return (\n            <CommentBox\n              key={id}\n              comment={commentTrack}\n              top={top}\n              dataBox={id}\n            />\n          );\n        }\n        return (\n          <TrackChangeBox\n            key={id}\n            trackChange={commentTrack}\n            view={view}\n            top={top}\n            dataBox={id}\n          />\n        );\n      })}\n    </>\n  );\n};\n","/* eslint react/prop-types: 0 */\nimport { Mark } from 'prosemirror-model';\nimport React, { useContext, useState, useMemo, useCallback } from 'react';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nimport { each, uniqBy, sortBy } from 'lodash';\nimport { WaxContext } from 'wax-prosemirror-core';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\nimport BoxList from './BoxList';\n\nexport default ({ area }) => {\n  const {\n    view,\n    view: { main },\n    app,\n    activeView,\n  } = useContext(WaxContext);\n  const commentPlugin = app.PmPlugins.get('commentPlugin');\n  const [marksNodes, setMarksNodes] = useState([]);\n  const [position, setPosition] = useState();\n  const [isFirstRun, setFirstRun] = useState(true);\n\n  const setTops = useCallback(() => {\n    const result = [];\n    let markNodeEl = null;\n    let annotationTop = 0;\n    let boxHeight = 0;\n    let top = 0;\n    const allCommentsTop = [];\n\n    const nodesMarksToIterrate =\n      marksNodes[area] === 'main'\n        ? sortBy(marksNodes[area], ['pos'])\n        : marksNodes[area];\n\n    each(nodesMarksToIterrate, (markNode, pos) => {\n      const WaxSurface = main.dom.getBoundingClientRect();\n      const id =\n        markNode instanceof Mark ? markNode.attrs.id : markNode.node.attrs.id;\n\n      const activeComment = commentPlugin.getState(activeView.state).comment;\n\n      let isActive = false;\n      if (activeComment && id === activeComment.attrs.id) isActive = true;\n\n      // annotation top\n      if (area === 'main') {\n        markNodeEl = document.querySelector(`[data-id=\"${id}\"]`);\n        if (markNodeEl)\n          annotationTop =\n            markNodeEl.getBoundingClientRect().top - WaxSurface.top;\n      } else {\n        const panelWrapper = document.getElementsByClassName('panelWrapper');\n        const panelWrapperHeight = panelWrapper[0].getBoundingClientRect()\n          .height;\n        markNodeEl = document\n          .querySelector('#notes-container')\n          .querySelector(`[data-id=\"${id}\"]`);\n        if (markNodeEl)\n          annotationTop =\n            markNodeEl.getBoundingClientRect().top - panelWrapperHeight - 50;\n      }\n\n      // get height of this markNode box\n      const boxEl = document.querySelector(`div[data-box=\"${id}\"]`);\n      if (boxEl) boxHeight = parseInt(boxEl.offsetHeight, 10);\n\n      // where the box should move to\n      top = annotationTop;\n\n      // if the above comment box has already taken up the height, move down\n      if (pos > 0) {\n        const previousBox = marksNodes[area][pos - 1];\n        const previousEndHeight = previousBox.endHeight;\n        if (annotationTop < previousEndHeight) {\n          top = previousEndHeight + 2;\n        }\n      }\n      // store where the box ends to be aware of overlaps in the next box\n      markNode.endHeight = top + boxHeight + 2;\n      result[pos] = top;\n      allCommentsTop.push({ [id]: result[pos] });\n\n      // if active, move as many boxes above as needed to bring it to the annotation's height\n      if (isActive) {\n        markNode.endHeight = annotationTop + boxHeight + 2;\n        result[pos] = annotationTop;\n        allCommentsTop[pos][id] = result[pos];\n        let b = true;\n        let i = pos;\n\n        // first one active, none above\n        if (i === 0) b = false;\n\n        while (b) {\n          const boxAbove = marksNodes[area][i - 1];\n          const boxAboveEnds = boxAbove.endHeight;\n          const currentTop = result[i];\n\n          const doesOverlap = boxAboveEnds > currentTop;\n\n          if (doesOverlap) {\n            const overlap = boxAboveEnds - currentTop;\n            result[i - 1] -= overlap;\n\n            const previousMarkNode =\n              marksNodes[area][i - 1] instanceof Mark\n                ? marksNodes[area][i - 1].attrs.id\n                : marksNodes[area][i - 1].node.attrs.id;\n\n            allCommentsTop[i - 1][previousMarkNode] = result[i - 1];\n          }\n\n          if (!doesOverlap) b = false;\n          if (i <= 1) b = false;\n          i -= 1;\n        }\n      }\n    });\n\n    return allCommentsTop;\n  });\n\n  useDeepCompareEffect(() => {\n    setMarksNodes(updateMarks(view));\n    if (isFirstRun) {\n      setTimeout(() => {\n        setPosition(setTops());\n        setFirstRun(false);\n      }, 400);\n    } else {\n      setPosition(setTops());\n    }\n  }, [updateMarks(view), setTops()]);\n\n  const CommentTrackComponent = useMemo(\n    () => (\n      <BoxList\n        commentsTracks={marksNodes[area] || []}\n        area={area}\n        view={main}\n        position={position}\n      />\n    ),\n    [marksNodes[area] || [], position],\n  );\n  return <>{CommentTrackComponent}</>;\n};\n\n//  TODO if allInlineNodes and allBlockNodes count don't change, do not compute again\nconst updateMarks = view => {\n  if (view.main) {\n    const allInlineNodes = [];\n\n    Object.keys(view).forEach(eachView => {\n      allInlineNodes.push(\n        ...DocumentHelpers.findInlineNodes(view[eachView].state.doc),\n      );\n    });\n\n    const allBlockNodes = DocumentHelpers.findBlockNodes(view.main.state.doc);\n    const finalMarks = [];\n    const finalNodes = [];\n\n    allInlineNodes.map(node => {\n      if (node.node.marks.length > 0) {\n        node.node.marks.filter(mark => {\n          if (\n            mark.type.name === 'comment' ||\n            mark.type.name === 'insertion' ||\n            mark.type.name === 'deletion' ||\n            mark.type.name === 'format_change'\n          ) {\n            mark.pos = node.pos;\n            finalMarks.push(mark);\n          }\n        });\n      }\n    });\n\n    allBlockNodes.map(node => {\n      if (node.node.attrs.track && node.node.attrs.track.length > 0) {\n        finalNodes.push(node);\n      }\n    });\n\n    const nodesAndMarks = [...uniqBy(finalMarks, 'attrs.id'), ...finalNodes];\n\n    const groupedMarkNodes = {};\n\n    nodesAndMarks.forEach(markNode => {\n      const markNodeAttrs = markNode.attrs\n        ? markNode.attrs\n        : markNode.node.attrs;\n\n      if (!groupedMarkNodes[markNodeAttrs.group]) {\n        groupedMarkNodes[markNodeAttrs.group] = [markNode];\n      } else {\n        groupedMarkNodes[markNodeAttrs.group].push(markNode);\n      }\n    });\n    return groupedMarkNodes;\n  }\n  return [];\n};\n","import React, { useContext, useState } from 'react';\nimport styled from 'styled-components';\nimport { ButtonStyles } from 'wax-prosemirror-themes';\nimport { WaxContext } from 'wax-prosemirror-core';\n\nconst ButtonStyled = styled.button`\n  ${ButtonStyles};\n  opacity: ${props => (props.select ? 1 : 0.4)};\n  pointer-events: ${props => (props.select ? 'default' : 'none')};\n  color: ${props => (props.isActive ? 'white' : props.theme.colorButton)};\n  background-color: ${props =>\n    props.isActive ? props.theme.colorPrimary : 'transparent'};\n  &:hover {\n    background-color: ${props =>\n      props.isActive ? props.theme.colorPrimary : 'transparent'};\n  }\n`;\n\nconst TrackChangeEnable = ({ view = {}, item, enabled }) => {\n  if (item.onlyOnMain) {\n    const {\n      view: { main },\n    } = useContext(WaxContext);\n    view = main;\n  }\n\n  const [isEnabled, setEnabled] = useState(enabled);\n\n  return (\n    <ButtonStyled\n      type=\"button\"\n      isActive={isEnabled}\n      title={item.title}\n      disabled={item.enable && !item.enable(view.state)}\n      onMouseDown={e => {\n        e.preventDefault();\n        setEnabled(!isEnabled);\n        item.run(view.state, view.dispatch);\n      }}\n      select={item.select && item.select(view.state)}\n    >\n      {item.content}\n    </ButtonStyled>\n  );\n};\n\nexport default TrackChangeEnable;\n"],"names":["_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","InfoAreaContainer","styled","div","InfoArea","React","OverlayContainer","props","position","left","top","Overlay","children","ButtonStyled","button","ButtonStyles","select","isActive","theme","colorButton","colorPrimary","Button","view","item","useContext","WaxContext","main","activeViewId","onlyOnMain","active","state","title","enable","e","preventDefault","run","dispatch","content","em","faItalic","italic","strong","faBold","bold","code","faCode","subscript","faSubscript","superscript","faSuperscript","underline","faUnderline","strikethrough","faStrikethrough","link","faLink","paragraph","faParagraph","heading","faHeading","blockquote","faQuoteLeft","code_block","faFileCode","ordered_list","faListOl","bullet_list","faListUl","image","faImage","table","faTable","footnote","faStickyNote","undo","faUndo","redo","faRedo","lift","faOutdent","join_up","faAngleUp","source","faVial","ellipses","faEllipsisH","small_caps","DropdownStyled","Dropdown","dropDownOptions","label","TableDropDown","option","tablesFn","UploadImage","ImageUpload","fileUpload","target","files","LeftMenuStyled","LeftMenuTitle","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","length","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","prototype","toString","call","constructor","name","from","test","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","ToolGroupStyled","MoreButton","InnerStyled","ToolGroupComponent","tools","useState","more","showHide","toolsShown","rest","DisplayTitle","isFunction","forEach","tool","isIntoMoreSection","isDisplayed","renderTool","icons","NoteNumberStyled","onClick","NoteNumber","number","NoteEditorContainerStyled","NoteStyled","NoteEditorContainer","forwardRef","ref","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","arguments","getOwnPropertyDescriptors","LinkWrapper","LinkComponent","mark","setPosition","href","attrs","linkMark","activeView","useRef","linkInput","addButtonText","setButtonText","lastLinkMark","setLLastLinkMark","linkHref","setLinkHref","useEffect","setLinkText","removeMarkIfEmptyHref","current","addLinkHref","schema","marks","tr","addMark","to","create","focus","removeLink","removeMark","handleKeyDown","event","which","updateLinkHref","selection","$from","$to","PMLinkMark","actualMark","DocumentHelpers","getSelectionMark","pos","setMeta","CommentBubbleComponent","showComment","group","useLayoutEffect","WaxSurface","dom","getBoundingClientRect","start","coordsAtPos","end","difference","width","x","createComment","Commands","isSelectionComment","commentMark","comment","findMark","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","SinlgeCommentRow","user","commentInput","commentAnnotation","setCommentAnnotation","commentInputValue","setcommentInputValue","allCommentsWithSameId","findAllMarksWithSameId","conversation","setTimeout","saveComment","stopPropagation","doc","displayName","username","timestamp","Math","floor","Date","now","singleComment","nodeSize","updateCommentInputValue","onBlur","resolveComment","maxPos","minPos","markPosition","findMarkPosition","last","node","commentInputReply","map","index","uuidv4","CommentBoxStyled","dataBox","console","log","animate","setAnimate","id","MemorizedComponent","memo","app","commentPlugin","PmPlugins","get","activeComment","getState","setCommentActive","viewId","viewid","maxBy","setSelection","TextSelection","resolve","Transition","TrackChangeBoxStyled","trackChange","action","Mark","type","before","after","Fragment","commentsTracks","commentTrack","area","marksNodes","setMarksNodes","isFirstRun","setFirstRun","setTops","useCallback","result","markNodeEl","annotationTop","boxHeight","allCommentsTop","nodesMarksToIterrate","sortBy","each","markNode","document","querySelector","panelWrapper","getElementsByClassName","panelWrapperHeight","height","boxEl","parseInt","offsetHeight","previousBox","previousEndHeight","endHeight","b","boxAbove","boxAboveEnds","currentTop","doesOverlap","overlap","previousMarkNode","useDeepCompareEffect","updateMarks","CommentTrackComponent","useMemo","allInlineNodes","eachView","findInlineNodes","allBlockNodes","findBlockNodes","finalMarks","finalNodes","track","nodesAndMarks","uniqBy","groupedMarkNodes","markNodeAttrs","TrackChangeEnable","enabled","isEnabled","setEnabled"],"mappings":"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"}